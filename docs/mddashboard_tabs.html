<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>MedTrack Pro - Patient Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" onerror="console.warn('Chart.js failed to load from CDN')"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* Prevent text selection on mobile */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Allow text selection for content areas */
        .lab-results-table, .insight-content, .treatment-recommendations, p {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f7f4f0 0%, #ececec 100%);
            min-height: 100vh;
            color: #333;
            /* Prevent bounce scrolling on iOS */
            -webkit-overflow-scrolling: touch;
            overflow-x: hidden;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .patient-info {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 20px;
        }

        .patient-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            font-weight: bold;
        }

        .patient-details h1 {
            color: #2c3e50;
            margin-bottom: 5px;
            font-size: 28px;
        }

        .patient-meta {
            display: flex;
            gap: 15px;
            color: #7f8c8d;
            font-size: 14px;
        }

        .alert-badges {
            display: flex;
            gap: 10px;
            flex-direction: column;
            align-items: flex-end;
        }

        .alert {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .alert-high { background: #ff6b6b; color: white; }
        .alert-medium { background: #ffa726; color: white; }
        .alert-info { background: #42a5f5; color: white; }

        .main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .icon {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        .lab-results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .lab-results-table th,
        .lab-results-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }

        .lab-results-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
            font-size: 14px;
        }

        .value-normal { color: #27ae60; font-weight: 600; }
        .value-high { color: #e74c3c; font-weight: 600; }
        .value-low { color: #f39c12; font-weight: 600; }

        .symptoms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .symptom-card {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .symptom-card:hover {
            transform: scale(1.05);
        }

        /* Severity-based color coding */
        .symptom-card.severity-mild {
            background: linear-gradient(45deg, #4CAF50, #8BC34A);
        }

        .symptom-card.severity-moderate {
            background: linear-gradient(45deg, #FF9800, #FFC107);
        }

        .symptom-card.severity-high {
            background: linear-gradient(45deg, #F44336, #E91E63);
        }

        .symptom-severity {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .medication-list {
            list-style: none;
        }

        .medication-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .med-name {
            font-weight: 600;
            color: #2c3e50;
        }

        .med-dosage {
            color: #7f8c8d;
            font-size: 14px;
        }

        .med-date {
            color: #95a5a6;
            font-size: 12px;
            font-style: italic;
            margin-top: 3px;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }

        /* Enhanced Mobile-Friendly Tab Styles */
        .tabs {
            display: flex;
            border-bottom: 2px solid #ecf0f1;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px 12px 0 0;
            padding: 8px;
            gap: 4px;
            overflow-x: auto;
            overflow-y: hidden;
            /* Smooth scrolling for mobile */
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            /* Ensure minimum touch target size for accessibility */
            min-height: 44px;
            min-width: 100px;
            padding: 14px 20px;
            cursor: pointer;
            border: 2px solid transparent;
            background: transparent;
            background-clip: padding-box;
            font-size: 16px;
            color: #2c3e50;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
            position: relative;
            backdrop-filter: blur(10px);
            white-space: nowrap;
            display: flex;
            align-items: center;
            justify-content: center;
            
            /* Touch-specific properties */
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            /* Prevent text selection */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .tab:not(.active)::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 8px;
            padding: 2px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: xor;
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            pointer-events: none;
        }

        /* Touch-friendly hover states */
        @media (hover: hover) and (pointer: fine) {
            .tab:hover {
                background: rgba(255, 255, 255, 0.8);
                color: #2c3e50;
                transform: translateY(-1px);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            }
        }

        /* Touch device specific styles */
        @media (hover: none) and (pointer: coarse) {
            .tab:active {
                background: rgba(255, 255, 255, 0.9);
                transform: scale(0.98);
            }
        }

        /* Touch feedback for active state */
        .tab.active {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(245, 246, 247, 0.4);
            transform: translateY(-2px);
        }

        /* Enhanced touch feedback */
        .tab.touching {
            background: rgba(255, 255, 255, 0.9);
            transform: scale(0.98);
            transition: all 0.1s ease;
        }

        .tab.active.touching {
            background: linear-gradient(135deg, #3d8bfe, #00d2fe);
            transform: scale(0.98) translateY(-2px);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .vitals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .vital-card {
            text-align: center;
            padding: 20px;
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            color: white;
            border-radius: 12px;
        }

        .vital-value {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .vital-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .timeline {
            position: relative;
            margin: 20px 0;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .timeline-date {
            font-weight: 600;
            color: #2c3e50;
            min-width: 100px;
        }

        .timeline-content {
            flex: 1;
            margin-left: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            transition: width 0.3s ease;
        }

        /* Enhanced Mobile Responsive Design */
        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .patient-info {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 15px;
            }
            
            .alert-badges {
                align-items: center;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                gap: 8px;
            }

            .dashboard-container {
                padding: 15px;
            }

            .header {
                padding: 20px 15px;
            }

            .card {
                padding: 20px 15px;
            }

            /* Mobile tab adjustments */
            .tabs {
                padding: 6px;
                gap: 2px;
                margin-bottom: 15px;
            }

            .tab {
                min-width: 90px;
                padding: 12px 16px;
                font-size: 14px;
                min-height: 44px;
            }

            /* Smaller screens - stack tabs vertically if needed */
            @media (max-width: 480px) {
                .symptoms-grid {
                    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                    gap: 10px;
                }

                .vitals-grid {
                    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                    gap: 15px;
                }

                .patient-meta {
                    flex-direction: column;
                    gap: 5px;
                    font-size: 12px;
                }

                .tabs {
                    flex-wrap: wrap;
                    max-height: 100px;
                    overflow-y: auto;
                }

                .tab {
                    flex: 1;
                    min-width: calc(50% - 4px);
                    margin-bottom: 4px;
                }
            }
        }

        /* Insights Section Styles */
        .insights-section {
            margin-top: 30px;
            padding-top: 25px;
            border-top: 2px solid #ecf0f1;
        }

        .insights-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insight-cards {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }

        .insight-card {
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid;
        }

        .insight-card.critical {
            background: rgba(231, 76, 60, 0.05);
            border-left-color: #e74c3c;
        }

        .insight-card.warning {
            background: rgba(243, 156, 18, 0.05);
            border-left-color: #f39c12;
        }

        .insight-card.info {
            background: rgba(52, 152, 219, 0.05);
            border-left-color: #3498db;
        }

        .insight-header {
            font-weight: 600;
            font-size: 16px;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .insight-content p {
            margin-bottom: 8px;
            font-size: 14px;
            line-height: 1.5;
        }

        .treatment-recommendations {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #27ae60;
        }

        .treatment-recommendations h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .treatment-recommendations ul {
            list-style: none;
            padding: 0;
        }

        .treatment-recommendations li {
            margin-bottom: 12px;
            padding-left: 20px;
            position: relative;
            font-size: 14px;
            line-height: 1.5;
        }

        .treatment-recommendations li::before {
            content: "‚Ä¢";
            color: #27ae60;
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        /* Wearables Styles */
        .wearables-overview {
            margin-bottom: 25px;
        }

        .wearable-metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .wearable-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .wearable-card:hover {
            transform: translateY(-2px);
        }

        .wearable-card.sleep { background: linear-gradient(135deg, #4e54c8, #8f94fb); }
        .wearable-card.steps { background: linear-gradient(135deg, #11998e, #38ef7d); }
        .wearable-card.heart { background: linear-gradient(135deg, #fc466b, #3f5efb); }
        .wearable-card.hrv { background: linear-gradient(135deg, #3b41c5, #a981bb); }
        .wearable-card.oxygen { background: linear-gradient(135deg, #209cff, #68e0cf); }
        .wearable-card.stress { background: linear-gradient(135deg, #ff9966, #ff5e62); }

        .metric-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .metric-value {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .metric-change {
            font-size: 12px;
            font-weight: 600;
        }

        .metric-change.up { color: #ffeb3b; }
        .metric-change.down { color: #ff8a80; }
        .metric-change.stable { color: #a5d6a7; }

        .sleep-breakdown {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .sleep-breakdown h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .sleep-stages {
            display: grid;
            gap: 10px;
        }

        .sleep-stage {
            display: grid;
            grid-template-columns: 120px 1fr auto;
            align-items: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
            font-size: 14px;
        }

        .stage-label {
            font-weight: 600;
            color: #2c3e50;
        }

        .stage-value {
            color: #7f8c8d;
        }

        .stage-status {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .stage-status.normal { background: #d4edda; color: #155724; }
        .stage-status.low { background: #fff3cd; color: #856404; }
        .stage-status.high { background: #f8d7da; color: #721c24; }

        /* Trends Insights Styles */
        .trends-insights-section {
            margin-top: 30px;
            padding-top: 25px;
            border-top: 2px solid #ecf0f1;
        }

        .trends-insight-cards {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }

        .prognosis-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .prognosis-section h4 {
            color: white;
            margin-bottom: 20px;
            font-size: 18px;
        }

        .prognosis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .prognosis-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .prognosis-item strong {
            display: block;
            margin-bottom: 10px;
            font-size: 16px;
            color: #ffffff;
        }

        .prognosis-item p {
            font-size: 14px;
            line-height: 1.5;
            color: rgba(255, 255, 255, 0.9);
        }
    </style>
    
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <div class="header">
            <div class="patient-info">
                <div class="patient-avatar">SM</div>
                <div class="patient-details">
                    <h1>Sarah Mitchell</h1>
                    <div class="patient-meta">
                        <span>DOB: March 15, 1985 (39 years)</span>
                        <span>‚Ä¢</span>
                        <span>ID: PM-2024-7891</span>
                        <span>‚Ä¢</span>
                        <span>Last Visit: July 25, 2025</span>
                    </div>
                </div>
                <div class="alert-badges">
                    <div class="alert alert-high">High Cholesterol</div>
                    <div class="alert alert-medium">Iron Deficiency</div>
                    <div class="alert alert-info">Monitoring</div>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="main-grid">
            <!-- Left Column -->
            <div class="card">
                <div class="tabs">
                    <button class="tab active" data-tab="lab-results">Lab Results</button>
                    <button class="tab" data-tab="symptoms">Symptom Tracking</button>
                    <button class="tab" data-tab="wearables">Wearables Data</button>
                    <button class="tab" data-tab="trends">Trends</button>
                </div>

                <!-- Lab Results Tab -->
                <div id="lab-results" class="tab-content active">
                    <div class="card-title">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M19,3H14.82C14.4,1.84 13.3,1 12,1C10.7,1 9.6,1.84 9.18,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M12,3A1,1 0 0,1 13,4A1,1 0 0,1 12,5A1,1 0 0,1 11,4A1,1 0 0,1 12,3"/>
                        </svg>
                        Complete Blood Count (CBC) - July 28, 2025
                    </div>
                    <table class="lab-results-table">
                        <thead>
                            <tr>
                                <th>Test</th>
                                <th>Result</th>
                                <th>Normal Range</th>
                                <th>Status</th>
                                <th>Trend</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>White Blood Cells</td>
                                <td class="value-normal">7.2 K/ŒºL</td>
                                <td>4.0-11.0 K/ŒºL</td>
                                <td>Normal</td>
                                <td>‚Üí Stable</td>
                            </tr>
                            <tr>
                                <td>Red Blood Cells</td>
                                <td class="value-normal">4.1 M/ŒºL</td>
                                <td>3.8-5.2 M/ŒºL</td>
                                <td>Normal</td>
                                <td>‚Üì Slight decline</td>
                            </tr>
                            <tr>
                                <td>Hemoglobin</td>
                                <td class="value-low">10.8 g/dL</td>
                                <td>12.0-16.0 g/dL</td>
                                <td>Low ‚ö†Ô∏è</td>
                                <td>‚Üì Declining</td>
                            </tr>
                            <tr>
                                <td>Hematocrit</td>
                                <td class="value-low">32.1%</td>
                                <td>36.0-48.0%</td>
                                <td>Low ‚ö†Ô∏è</td>
                                <td>‚Üì Declining</td>
                            </tr>
                            <tr>
                                <td>Platelets</td>
                                <td class="value-normal">285 K/ŒºL</td>
                                <td>150-450 K/ŒºL</td>
                                <td>Normal</td>
                                <td>‚Üí Stable</td>
                            </tr>
                            <tr>
                                <td>Total Cholesterol</td>
                                <td class="value-high">248 mg/dL</td>
                                <td>&lt;200 mg/dL</td>
                                <td>High üö®</td>
                                <td>‚Üë Rising</td>
                            </tr>
                            <tr>
                                <td>Iron</td>
                                <td class="value-low">45 Œºg/dL</td>
                                <td>60-170 Œºg/dL</td>
                                <td>Low ‚ö†Ô∏è</td>
                                <td>‚Üì Declining</td>
                            </tr>
                            <tr>
                                <td>Ferritin</td>
                                <td class="value-low">8 ng/mL</td>
                                <td>15-150 ng/mL</td>
                                <td>Low ‚ö†Ô∏è</td>
                                <td>‚Üì Critically low</td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Clinical Insights Section -->
                    <div class="insights-section">
                        <h3 class="insights-title">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,17A1.5,1.5 0 0,0 10.5,15.5A1.5,1.5 0 0,0 12,14A1.5,1.5 0 0,0 13.5,15.5A1.5,1.5 0 0,0 12,17M12,4A6,6 0 0,0 6,10C6,10 6,10.5 6.5,11H9V12.5H8.5C8,12.5 7.5,12.85 7.5,13.5V16H10.5V13.5H11.5V16H16.5V13.5C16.5,12.85 16,12.5 15.5,12.5H15V11H17.5C18,10.5 18,10 18,10A6,6 0 0,0 12,4Z"/>
                            </svg>
                            Clinical Insights & Symptom-Lab Correlation
                        </h3>
                        
                        <div class="insight-cards">
                            <div class="insight-card critical">
                                <div class="insight-header">ü©∏ Iron Deficiency Anemia - CONFIRMED</div>
                                <div class="insight-content">
                                    <p><strong>Lab Evidence:</strong> Low Hemoglobin (10.8), Hematocrit (32.1%), Iron (45), Ferritin (8)</p>
                                    <p><strong>Supporting Symptoms:</strong> Fatigue (6/10, increasing), Dizziness (3/10), correlating with declining lab values</p>
                                    <p><strong>Wearable Data:</strong> Decreased step count (-22%), increased resting HR (+8 bpm), poor sleep quality</p>
                                </div>
                            </div>
                            
                            <div class="insight-card warning">
                                <div class="insight-header">‚ù§Ô∏è Hypercholesterolemia - REQUIRES ATTENTION</div>
                                <div class="insight-content">
                                    <p><strong>Lab Evidence:</strong> Total Cholesterol 248 mg/dL (24% above target)</p>
                                    <p><strong>Current Treatment:</strong> Atorvastatin 20mg (started May 2025) - may need dose adjustment</p>
                                    <p><strong>Lifestyle Impact:</strong> Reduced activity levels may be contributing to lipid elevation</p>
                                </div>
                            </div>
                            
                            <div class="insight-card info">
                                <div class="insight-header">üîç Inflammatory Markers - MONITORING</div>
                                <div class="insight-content">
                                    <p><strong>Symptom Pattern:</strong> Joint pain (7/10, worsening) without clear lab inflammation markers</p>
                                    <p><strong>Recommendation:</strong> Consider ESR, CRP, and rheumatologic panel</p>
                                    <p><strong>Activity Impact:</strong> 35% reduction in active minutes, may be pain-related</p>
                                </div>
                            </div>
                        </div>

                        <div class="treatment-recommendations">
                            <h4>üìã Recommended Actions</h4>
                            <ul>
                                <li><strong>Iron Therapy Monitoring:</strong> Current therapy started Jul 20 (8 days ago) - continue current dose and reassess in 4-6 weeks to determine whether increase is needed</li>
                                <li><strong>Cholesterol Management:</strong> Evaluate atorvastatin effectiveness, consider lifestyle counseling</li>
                                <li><strong>Activity Monitoring:</strong> Gradual increase in activity as anemia improves</li>
                                <li><strong>Follow-up Labs:</strong> Repeat CBC, iron studies in 4-6 weeks</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Symptoms Tab -->
                <div id="symptoms" class="tab-content">
                    <div class="card-title">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"/>
                        </svg>
                        Current Symptoms (Last 7 Days)
                    </div>
                    <div class="symptoms-grid">
                        <div class="symptom-card severity-moderate">
                            <div class="symptom-severity">6/10</div>
                            <div>Fatigue</div>
                            <div style="font-size: 12px; opacity: 0.8;">‚Üë Increasing</div>
                        </div>
                        <div class="symptom-card severity-mild">
                            <div class="symptom-severity">4/10</div>
                            <div>Headaches</div>
                            <div style="font-size: 12px; opacity: 0.8;">‚Üí Stable</div>
                        </div>
                        <div class="symptom-card severity-mild">
                            <div class="symptom-severity">3/10</div>
                            <div>Dizziness</div>
                            <div style="font-size: 12px; opacity: 0.8;">‚Üì Improving</div>
                        </div>
                        <div class="symptom-card severity-high">
                            <div class="symptom-severity">7/10</div>
                            <div>Joint Pain</div>
                            <div style="font-size: 12px; opacity: 0.8;">‚Üë Worsening</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="symptomsChart"></canvas>
                    </div>
                </div>

                <!-- Wearables Data Tab -->
                <div id="wearables" class="tab-content">
                    <div class="card-title">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M20.1,7L23,9.2L21.8,10.6L19.3,8.5L19.4,7H20.1M4.8,6.8L7.3,8.5L6.2,10.1L3.2,7.9L4.8,6.8M12.5,1H11.5V4H12.5V1M21,13H24V12H21V13M0,13H3V12H0V13M6,20H18A2,2 0 0,1 20,22H4A2,2 0 0,1 6,20M8,22H16V23H8V22Z"/>
                        </svg>
                        Wearable Device Data (Last 7 Days)
                    </div>
                    
                    <div class="wearables-overview">
                        <div class="wearable-metric-grid">
                            <div class="wearable-card sleep">
                                <div class="metric-icon">üõå</div>
                                <div class="metric-value">5.2 hrs</div>
                                <div class="metric-label">Avg Sleep</div>
                                <div class="metric-change down">‚Üì -1.3 hrs vs baseline</div>
                            </div>
                            <div class="wearable-card steps">
                                <div class="metric-icon">üëü</div>
                                <div class="metric-value">4,650</div>
                                <div class="metric-label">Daily Steps</div>
                                <div class="metric-change down">‚Üì -22% vs target</div>
                            </div>
                            <div class="wearable-card heart">
                                <div class="metric-icon">‚ù§Ô∏è</div>
                                <div class="metric-value">78 bpm</div>
                                <div class="metric-label">Resting HR</div>
                                <div class="metric-change up">‚Üë +8 bpm vs baseline</div>
                            </div>
                            <div class="wearable-card hrv">
                                <div class="metric-icon">üìä</div>
                                <div class="metric-value">28 ms</div>
                                <div class="metric-label">HRV</div>
                                <div class="metric-change down">‚Üì Low variability</div>
                            </div>
                            <div class="wearable-card oxygen">
                                <div class="metric-icon">üîµ</div>
                                <div class="metric-value">97%</div>
                                <div class="metric-label">SpO2</div>
                                <div class="metric-change stable">‚Üí Normal range</div>
                            </div>
                            <div class="wearable-card stress">
                                <div class="metric-icon">‚ö°</div>
                                <div class="metric-value">High</div>
                                <div class="metric-label">Stress Level</div>
                                <div class="metric-change up">‚Üë Above normal</div>
                            </div>
                        </div>
                    </div>

                    <div class="sleep-breakdown">
                        <h4>Sleep Quality Analysis</h4>
                        <div class="sleep-stages">
                            <div class="sleep-stage">
                                <span class="stage-label">Deep Sleep:</span>
                                <span class="stage-value">45 min (14%)</span>
                                <span class="stage-status low">Below optimal</span>
                            </div>
                            <div class="sleep-stage">
                                <span class="stage-label">REM Sleep:</span>
                                <span class="stage-value">68 min (22%)</span>
                                <span class="stage-status normal">Normal</span>
                            </div>
                            <div class="sleep-stage">
                                <span class="stage-label">Light Sleep:</span>
                                <span class="stage-value">3.2 hrs (64%)</span>
                                <span class="stage-status high">High proportion</span>
                            </div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <canvas id="wearablesChart"></canvas>
                    </div>
                </div>

                <!-- Trends Tab -->
                <div id="trends" class="tab-content">
                    <div class="card-title">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M16,6L18.29,8.29L13.41,13.17L9.41,9.17L2,16.59L3.41,18L9.41,12L13.41,16L19.71,9.71L22,12V6H16Z"/>
                        </svg>
                        Health Trends (6 Months)
                    </div>
                    <div class="chart-container">
                        <canvas id="trendsChart"></canvas>
                    </div>

                    <!-- Trends-Specific Clinical Insights -->
                    <div class="trends-insights-section">
                        <h3 class="insights-title">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z"/>
                            </svg>
                            Longitudinal Analysis & Treatment Response
                        </h3>
                        
                        <div class="trends-insight-cards">
                            <div class="insight-card critical">
                                <div class="insight-header">üìâ Progressive Iron Deficiency - CHRONIC PATTERN</div>
                                <div class="insight-content">
                                    <p><strong>6-Month Decline:</strong> Hemoglobin ‚Üì18% (12.1‚Üí10.8), Iron ‚Üì31% (65‚Üí45 Œºg/dL)</p>
                                    <p><strong>Clinical Significance:</strong> Consistent monthly decline suggests ongoing blood loss or malabsorption, not acute event</p>
                                    <p><strong>Treatment Response:</strong> Iron therapy started Jul 20 - need 4-6 week follow-up to assess efficacy</p>
                                </div>
                            </div>
                            
                            <div class="insight-card warning">
                                <div class="insight-header">üìà Accelerating Cardiovascular Risk</div>
                                <div class="insight-content">
                                    <p><strong>Cholesterol Trajectory:</strong> 13% increase over 6 months (220‚Üí248 mg/dL)</p>
                                    <p><strong>Statin Resistance:</strong> Despite atorvastatin since May 15, levels continue rising</p>
                                    <p><strong>Compounding Factors:</strong> Reduced activity from anemia may worsen lipid profile</p>
                                </div>
                            </div>
                            
                            <div class="insight-card info">
                                <div class="insight-header">üîç Timeline Correlation Analysis</div>
                                <div class="insight-content">
                                    <p><strong>Symptom Onset:</strong> Patient fatigue complaints began ~April (correlates with Hgb <11.5)</p>
                                    <p><strong>Critical Threshold:</strong> Joint pain emerged when ferritin likely fell below 15 ng/mL (May-June)</p>
                                    <p><strong>Predictive Value:</strong> Current trajectory suggests ferritin <5 ng/mL without intervention</p>
                                </div>
                            </div>
                        </div>

                        <div class="prognosis-section">
                            <h4>üìä Prognostic Modeling & Next Steps</h4>
                            <div class="prognosis-grid">
                                <div class="prognosis-item">
                                    <strong>Iron Recovery Timeline:</strong>
                                    <p>With current therapy (325mg daily), expect 4-6 weeks for symptom improvement, 3-6 months for complete iron store replenishment</p>
                                </div>
                                <div class="prognosis-item">
                                    <strong>Risk Stratification:</strong>
                                    <p>High risk for cardiac complications if Hgb falls below 10 g/dL - consider IV iron if no response in 4 weeks</p>
                                </div>
                                <div class="prognosis-item">
                                    <strong>Monitoring Schedule:</strong>
                                    <p>CBC weekly x2, then monthly. Investigate source of iron loss if no improvement by 8 weeks</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div>
                <!-- Current Medications -->
                <div class="card">
                    <div class="card-title">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M6.5,20.5L17.5,9.5C18.28,8.72 18.28,7.47 17.5,6.69L12.31,1.5C11.53,0.72 10.28,0.72 9.5,1.5L8.5,2.5L11.5,5.5L10.09,6.91L7.09,3.91L6.09,4.91L9.09,7.91L7.68,9.32L4.68,6.32L3.68,7.32L6.68,10.32L5.27,11.73L2.27,8.73L1.27,9.73L4.27,12.73L2.86,14.14L5.86,17.14L14.14,8.86L17.14,11.86L18.55,10.45L6.5,20.5Z"/>
                        </svg>
                        Current Medications
                    </div>
                    <ul class="medication-list">
                        <li class="medication-item">
                            <div>
                                <div class="med-name">Iron Sulfate 325mg</div>
                                <div class="med-dosage">Once daily with food</div>
                                <div class="med-date">Started: Jul 20, 2025</div>
                            </div>
                        </li>
                        <li class="medication-item">
                            <div>
                                <div class="med-name">Atorvastatin 20mg</div>
                                <div class="med-dosage">Once daily at bedtime</div>
                                <div class="med-date">Started: May 15, 2025</div>
                            </div>
                        </li>
                        <li class="medication-item">
                            <div>
                                <div class="med-name">Multivitamin</div>
                                <div class="med-dosage">Once daily with breakfast</div>
                                <div class="med-date">Started: Jan 10, 2025</div>
                            </div>
                        </li>
                        <li class="medication-item">
                            <div>
                                <div class="med-name">Ibuprofen 400mg</div>
                                <div class="med-dosage">As needed for joint pain</div>
                                <div class="med-date">Started: Jul 25, 2025</div>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Vital Signs -->
                <div class="card">
                    <div class="card-title">
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M19,14H15A3,3 0 0,1 12,11A3,3 0 0,1 15,8H19A1,1 0 0,1 20,9V13A1,1 0 0,1 19,14M15,10A1,1 0 0,0 14,11A1,1 0 0,0 15,12A1,1 0 0,0 16,11A1,1 0 0,0 15,10M12.5,2C13,2 13.5,2.17 13.9,2.45L21.6,8.82C22.08,9.21 22.39,9.76 22.5,10.37C22.61,11 22.5,11.64 22.17,12.22L17.63,20.29C17.25,20.93 16.61,21.36 15.87,21.5C15.13,21.64 14.37,21.47 13.77,21.05L7.45,16.8C6.85,16.38 6.5,15.73 6.5,15.04V9.96C6.5,9.27 6.85,8.62 7.45,8.2L13.77,3.95C14.12,3.73 14.56,3.61 15,3.61C15.44,3.61 15.88,3.73 16.23,3.95L18.4,5.5L12.5,2M15,5L12,8H15A2,2 0 0,1 17,10A2,2 0 0,1 15,12H12L15,15H19L15,5Z"/>
                        </svg>
                        Recent Vitals
                    </div>
                    <div class="vitals-grid">
                        <div class="vital-card">
                            <div class="vital-value">118/75</div>
                            <div class="vital-label">BP (mmHg)</div>
                        </div>
                        <div class="vital-card">
                            <div class="vital-value">72</div>
                            <div class="vital-label">Heart Rate</div>
                        </div>
                        <div class="vital-card">
                            <div class="vital-value">98.6¬∞F</div>
                            <div class="vital-label">Temperature</div>
                        </div>
                        <div class="vital-card">
                            <div class="vital-value">98%</div>
                            <div class="vital-label">O2 Sat</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Treatment Timeline -->
        <div class="card">
            <div class="card-title">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"/>
                </svg>
                Treatment Timeline
            </div>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-date">Jul 28, 2025</div>
                    <div class="timeline-content">
                        <strong>Lab Results Received</strong>
                        <p>CBC shows iron deficiency anemia and elevated cholesterol. Hemoglobin 10.8 g/dL, Ferritin 8 ng/mL, Total Cholesterol 248 mg/dL</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 100%"></div>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Jul 25, 2025</div>
                    <div class="timeline-content">
                        <strong>Clinical Visit</strong>
                        <p>Patient reports increased fatigue and joint pain. Wearable data shows declining activity levels and sleep quality</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 85%"></div>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Jul 20, 2025</div>
                    <div class="timeline-content">
                        <strong>Medication Started</strong>
                        <p>Iron sulfate 325mg daily prescribed for suspected iron deficiency anemia</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 70%"></div>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Jul 15, 2025</div>
                    <div class="timeline-content">
                        <strong>Symptom Tracking Started</strong>
                        <p>Patient enrolled in daily symptom monitoring and wearable device integration activated</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 60%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced Mobile-Friendly Tab Management System
        class MobileTabManager {
            constructor() {
                this.currentActiveTab = 'lab-results';
                this.touchStartTime = 0;
                this.touchStartX = 0;
                this.touchStartY = 0;
                this.touchHandled = false;
                this.init();
            }

            init() {
                this.bindEvents();
                this.preventDoubleClick();
            }

            bindEvents() {
                const tabs = document.querySelectorAll('.tab');
                
                tabs.forEach(tab => {
                    // Touch Events - only prevent default when necessary
                    tab.addEventListener('touchstart', this.handleTouchStart.bind(this), { passive: true });
                    tab.addEventListener('touchmove', this.handleTouchMove.bind(this), { passive: true });
                    tab.addEventListener('touchend', this.handleTouchEnd.bind(this), { passive: true });
                    tab.addEventListener('touchcancel', this.handleTouchCancel.bind(this), { passive: true });
                    
                    // Mouse Events (for desktop compatibility) - keep this simple
                    tab.addEventListener('click', this.handleClick.bind(this));
                    
                    // Prevent context menu on long press
                    tab.addEventListener('contextmenu', (e) => e.preventDefault());
                });
            }

            handleTouchStart(e) {
                this.touchHandled = false;
                this.touchStartTime = Date.now();
                this.touchStartX = e.touches[0].clientX;
                this.touchStartY = e.touches[0].clientY;
                
                const tab = e.currentTarget;
                tab.classList.add('touching');
                
                // Add haptic feedback if available
                if (navigator.vibrate) {
                    navigator.vibrate(10);
                }
            }

            handleTouchMove(e) {
                const currentX = e.touches[0].clientX;
                const currentY = e.touches[0].clientY;
                const deltaX = Math.abs(currentX - this.touchStartX);
                const deltaY = Math.abs(currentY - this.touchStartY);
                
                // If user is scrolling/swiping, cancel the touch
                if (deltaX > 10 || deltaY > 10) {
                    this.handleTouchCancel(e);
                }
            }

            handleTouchEnd(e) {
                const tab = e.currentTarget;
                const touchDuration = Date.now() - this.touchStartTime;
                const tabId = tab.getAttribute('data-tab');
                
                // Remove touch state
                tab.classList.remove('touching');
                
                // Only trigger if it was a quick tap (not a long press) and not cancelled
                if (touchDuration < 500 && !this.touchHandled) {
                    this.touchHandled = true;
                    this.switchTab(tabId, tab);
                }
            }

            handleTouchCancel(e) {
                const tab = e.currentTarget;
                tab.classList.remove('touching');
                this.touchHandled = true; // Mark as handled to prevent click
            }

            handleClick(e) {
                // Only handle click if touch wasn't already handled
                if (this.touchHandled) {
                    this.touchHandled = false; // Reset for next interaction
                    return;
                }
                
                const tab = e.currentTarget;
                const tabId = tab.getAttribute('data-tab');
                this.switchTab(tabId, tab);
            }

            switchTab(tabId, clickedTab) {
                try {
                    // Prevent switching to the same tab
                    if (tabId === this.currentActiveTab) {
                        return;
                    }
                    
                    // Hide all tab contents
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Remove active from all tabs
                    document.querySelectorAll('.tab').forEach(tab => {
                        tab.classList.remove('active');
                    });
                    
                    // Show selected tab content
                    const tabContent = document.getElementById(tabId);
                    if (tabContent) {
                        tabContent.classList.add('active');
                    }
                    
                    // Mark clicked tab as active
                    if (clickedTab) {
                        clickedTab.classList.add('active');
                    }
                    
                    // Update current active tab
                    this.currentActiveTab = tabId;
                    
                    // Initialize charts when tabs are shown
                    this.initializeTabContent(tabId);
                    
                    // Scroll to top of tab content on mobile
                    if (window.innerWidth <= 768) {
                        tabContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                    
                    // Add haptic feedback for successful tab switch
                    if (navigator.vibrate) {
                        navigator.vibrate(20);
                    }
                    
                } catch (error) {
                    console.error('Tab switching error:', error);
                }
            }

            initializeTabContent(tabId) {
                // Add a small delay to ensure the tab is visible before initializing charts
                setTimeout(() => {
                    switch(tabId) {
                        case 'symptoms':
                            this.initSymptomsChart();
                            break;
                        case 'wearables':
                            this.initWearablesChart();
                            break;
                        case 'trends':
                            this.initTrendsChart();
                            break;
                    }
                }, 100);
            }

            preventDoubleClick() {
                // Prevent double-tap zoom on tabs
                document.querySelectorAll('.tab').forEach(tab => {
                    let lastTouchEnd = 0;
                    tab.addEventListener('touchend', function(e) {
                        const now = (new Date()).getTime();
                        if (now - lastTouchEnd <= 300) {
                            e.preventDefault();
                        }
                        lastTouchEnd = now;
                    }, false);
                });
            }

            // Chart initialization methods
            initSymptomsChart() {
                try {
                    const ctx = document.getElementById('symptomsChart');
                    if (!ctx || !window.Chart) return;
                    
                    // Destroy existing chart if it exists
                    if (window.symptomsChartInstance) {
                        window.symptomsChartInstance.destroy();
                    }
                    
                    window.symptomsChartInstance = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ['Jul 22', 'Jul 23', 'Jul 24', 'Jul 25', 'Jul 26', 'Jul 27', 'Jul 28'],
                            datasets: [{
                                label: 'Fatigue',
                                data: [4, 5, 6, 7, 6, 7, 6],
                                borderColor: '#e74c3c',
                                backgroundColor: 'rgba(231, 76, 60, 0.1)',
                                tension: 0.4
                            }, {
                                label: 'Headaches',
                                data: [3, 4, 4, 5, 4, 4, 4],
                                borderColor: '#f39c12',
                                backgroundColor: 'rgba(243, 156, 18, 0.1)',
                                tension: 0.4
                            }, {
                                label: 'Joint Pain',
                                data: [5, 6, 6, 7, 7, 8, 7],
                                borderColor: '#9b59b6',
                                backgroundColor: 'rgba(155, 89, 182, 0.1)',
                                tension: 0.4
                            }, {
                                label: 'Dizziness',
                                data: [4, 4, 3, 3, 2, 3, 3],
                                borderColor: '#3498db',
                                backgroundColor: 'rgba(52, 152, 219, 0.1)',
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'top',
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    max: 10,
                                    title: {
                                        display: true,
                                        text: 'Severity (0-10)'
                                    }
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error('Symptoms chart initialization error:', error);
                }
            }

            initWearablesChart() {
                try {
                    const ctx = document.getElementById('wearablesChart');
                    if (!ctx || !window.Chart) return;
                    
                    // Destroy existing chart if it exists
                    if (window.wearablesChartInstance) {
                        window.wearablesChartInstance.destroy();
                    }
                    
                    window.wearablesChartInstance = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ['Jul 22', 'Jul 23', 'Jul 24', 'Jul 25', 'Jul 26', 'Jul 27', 'Jul 28'],
                            datasets: [{
                                label: 'Daily Steps (thousands)',
                                data: [6.2, 5.8, 5.1, 4.7, 4.2, 4.8, 4.6],
                                borderColor: '#11998e',
                                backgroundColor: 'rgba(17, 153, 142, 0.1)',
                                tension: 0.4,
                                yAxisID: 'y'
                            }, {
                                label: 'Sleep Hours',
                                data: [6.5, 6.2, 5.8, 5.5, 4.9, 5.1, 5.2],
                                borderColor: '#4e54c8',
                                backgroundColor: 'rgba(78, 84, 200, 0.1)',
                                tension: 0.4,
                                yAxisID: 'y1'
                            }, {
                                label: 'Resting HR (bpm)',
                                data: [72, 74, 75, 76, 78, 77, 78],
                                borderColor: '#fc466b',
                                backgroundColor: 'rgba(252, 70, 107, 0.1)',
                                tension: 0.4,
                                yAxisID: 'y2'
                            }, {
                                label: 'HRV (ms)',
                                data: [35, 32, 30, 29, 27, 28, 28],
                                borderColor: '#3b41c5',
                                backgroundColor: 'rgba(59, 65, 197, 0.1)',
                                tension: 0.4,
                                yAxisID: 'y3'
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            interaction: {
                                mode: 'index',
                                intersect: false,
                            },
                            plugins: {
                                legend: {
                                    position: 'top',
                                }
                            },
                            scales: {
                                x: {
                                    display: true,
                                    title: {
                                        display: true,
                                        text: 'Date'
                                    }
                                },
                                y: {
                                    type: 'linear',
                                    display: true,
                                    position: 'left',
                                    title: {
                                        display: true,
                                        text: 'Steps (thousands)'
                                    },
                                    min: 0,
                                    max: 10
                                },
                                y1: {
                                    type: 'linear',
                                    display: false,
                                    position: 'right',
                                    min: 0,
                                    max: 10
                                },
                                y2: {
                                    type: 'linear',
                                    display: false,
                                    position: 'right',
                                    min: 60,
                                    max: 90
                                },
                                y3: {
                                    type: 'linear',
                                    display: false,
                                    position: 'right',
                                    min: 20,
                                    max: 40
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error('Wearables chart initialization error:', error);
                }
            }

            initTrendsChart() {
                try {
                    const ctx = document.getElementById('trendsChart');
                    if (!ctx || !window.Chart) return;
                    
                    // Destroy existing chart if it exists
                    if (window.trendsChartInstance) {
                        window.trendsChartInstance.destroy();
                    }
                    
                    window.trendsChartInstance = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ['Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                            datasets: [{
                                label: 'Hemoglobin (g/dL)',
                                data: [12.1, 11.8, 11.5, 11.2, 10.9, 10.8],
                                borderColor: '#e74c3c',
                                backgroundColor: 'rgba(231, 76, 60, 0.1)',
                                tension: 0.4,
                                yAxisID: 'y'
                            }, {
                                label: 'Iron (Œºg/dL) √∑ 10',
                                data: [6.5, 5.8, 5.2, 4.8, 4.6, 4.5],
                                borderColor: '#f39c12',
                                backgroundColor: 'rgba(243, 156, 18, 0.1)',
                                tension: 0.4,
                                yAxisID: 'y'
                            }, {
                                label: 'Cholesterol (mg/dL)',
                                data: [220, 225, 230, 238, 245, 248],
                                borderColor: '#8e44ad',
                                backgroundColor: 'rgba(142, 68, 173, 0.1)',
                                tension: 0.4,
                                yAxisID: 'y1'
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            interaction: {
                                mode: 'index',
                                intersect: false,
                            },
                            plugins: {
                                legend: {
                                    position: 'top',
                                }
                            },
                            scales: {
                                x: {
                                    display: true,
                                    title: {
                                        display: true,
                                        text: 'Month'
                                    }
                                },
                                y: {
                                    type: 'linear',
                                    display: true,
                                    position: 'left',
                                    title: {
                                        display: true,
                                        text: 'Hemoglobin (g/dL) ‚Ä¢ Iron (Œºg/dL) √∑ 10'
                                    },
                                    min: 4,
                                    max: 16
                                },
                                y1: {
                                    type: 'linear',
                                    display: true,
                                    position: 'right',
                                    title: {
                                        display: true,
                                        text: 'Cholesterol (mg/dL)'
                                    },
                                    min: 150,
                                    max: 300,
                                    grid: {
                                        drawOnChartArea: false,
                                    }
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error('Trends chart initialization error:', error);
                }
            }
        }

        // Initialize the mobile tab manager when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // Initialize the mobile-friendly tab system
                new MobileTabManager();

                // Add interactive effects for cards
                const cards = document.querySelectorAll('.card');
                cards.forEach(card => {
                    card.addEventListener('mouseenter', function() {
                        if (window.innerWidth > 768) { // Only on desktop
                            this.style.transform = 'translateY(-4px)';
                        }
                    });
                    card.addEventListener('mouseleave', function() {
                        if (window.innerWidth > 768) { // Only on desktop
                            this.style.transform = 'translateY(0)';
                        }
                    });
                });

                // Animate progress bars
                const progressBars = document.querySelectorAll('.progress-fill');
                progressBars.forEach(bar => {
                    const width = bar.style.width;
                    bar.style.width = '0%';
                    setTimeout(() => {
                        bar.style.width = width;
                    }, 500);
                });

                // Add orientation change handler for mobile
                window.addEventListener('orientationchange', function() {
                    setTimeout(() => {
                        // Trigger chart resize if needed
                        if (window.symptomsChartInstance) window.symptomsChartInstance.resize();
                        if (window.wearablesChartInstance) window.wearablesChartInstance.resize();
                        if (window.trendsChartInstance) window.trendsChartInstance.resize();
                    }, 500);
                });

            } catch (error) {
                console.error('Dashboard initialization error:', error);
            }
        });

        // Legacy function for backward compatibility
        function showTab(tabId, element) {
            console.warn('showTab() is deprecated. Using new mobile tab manager.');
            if (window.mobileTabManager) {
                window.mobileTabManager.switchTab(tabId, element);
            }
        }
    </script>
</body>
</html>